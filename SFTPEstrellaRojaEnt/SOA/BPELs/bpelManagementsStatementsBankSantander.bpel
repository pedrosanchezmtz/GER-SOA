<?xml version = "1.0" encoding = "UTF-8" ?>
<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  Oracle JDeveloper BPEL Designer 
  
  Created: Thu Dec 28 01:18:44 CST 2017
  Author:  Juan
  Type: BPEL 2.0 Process
  Purpose: One Way BPEL Process
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->
<process name="bpelManagementsStatementsBankSantander"
         targetNamespace="http://soa.estrellaroja.mx/SFTPEstrellaRojaEnt/bpelManagementsStatementsBankSantander"
         xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:client="http://soa.estrellaroja.mx/SFTPEstrellaRojaEnt/bpelManagementsStatementsBankSantander"
         xmlns:ora="http://schemas.oracle.com/xpath/extension" xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
         xmlns:ui="http://xmlns.oracle.com/soa/designer"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:xsd="http://www.w3.org/2001/XMLSchema"
         xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
         xmlns:bpm="http://xmlns.oracle.com/bpmn20/extensions"
         xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20"
         xmlns:ess="http://xmlns.oracle.com/scheduler" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath"
         xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions"
         xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue"
         xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
         xmlns:xdk="http://schemas.oracle.com/bpel/extension/xpath/function/xdk"
         xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath"
         xmlns:ldap="http://schemas.oracle.com/xpath/extension/ldap"
         xmlns:ns1="http://soa.estrellaroja.com.mx/ERPIntegrationBiz"
         xmlns:ns2="http://soa.estrellaroja.com.mx/EstrellaRojaCommons"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:ns3="http://soa.estrellaroja.com.mx/SFTPEstrellaRojaBiz"
         xmlns:ns4="http://soa.estrellaroja.com.mx/StructureCodeBank"
         xmlns:ns5="http://soa.estrellaroja.com.mx/ftpReadFileSant"
         xmlns:ns6="http://xmlns.oracle.com/pcbpel/adapter/ftp/SFTPEstrellaRojaEnt/SFTPEstrellaRojaEnt/ftpServiceReaderFileSantander"
         xmlns:ns7="http://soa.estrellaroja.com.mx/ftpServiceReaderFileSantander"
         xmlns:ns8="http://soa.estrellaroja.com.mx/BankCodes"
         xmlns:ns9="http://soa.estrellaroja.com.mx/SFTPEstrellaRojaEnt"
         xmlns:ns10="http://xmlns.oracle.com/pcbpel/adapter/ftp/SFTPEstrellaRojaEnt/SFTPEstrellaRojaEnt/ftpRServiceWriteFile"
         xmlns:ns11="http://xmlns.oracle.com/pcbpel/adapter/ftp/SFTPEstrellaRojaEnt/SFTPEstrellaRojaEnt/ftpWriteFile"
         xmlns:ns12="http://soa.estrellaroja.com.mx/SFTPEstrellaRojaEnt/StructureBankDetails"
         xmlns:ns13="http://soa.estrellaroja.com.mx/MessageBiz"
         xmlns:ns14="http://soa.estrellaroja.com.mx/ERPManagementOfLoadImportBiz">
 
  <import namespace="http://soa.estrellaroja.com.mx/SFTPEstrellaRojaEnt/StructureBankDetails"
          location="../Schemas/StructureBankDetails.xsd" importType="http://www.w3.org/2001/XMLSchema"/>
  <import namespace="http://soa.estrellaroja.com.mx/ftpServiceReaderFileSantander"
          location="../Schemas/Banks/ftpReadFileSantander.xsd" importType="http://www.w3.org/2001/XMLSchema"/>
  <import namespace="http://soa.estrellaroja.com.mx/BankCodes" location="../Schemas/BankCodes.xsd"
          importType="http://www.w3.org/2001/XMLSchema"/>
  <import namespace="http://soa.estrellaroja.com.mx/StructureCodeBank" location="../Schemas/StructureBankCode.xsd"
          importType="http://www.w3.org/2001/XMLSchema"/>
  <import ui:processWSDL="true"
          namespace="http://soa.estrellaroja.mx/SFTPEstrellaRojaEnt/bpelManagementsStatementsBankSantander"
          location="../WSDLs/bpelManagementsStatementsBankSantander.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <!-- 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      PARTNERLINKS                                                      
      List of services participating in this BPEL process               
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <partnerLinks>
    <!-- 
      The 'client' role represents the requester of this service. It is 
      used for callback. The location and correlation information associated
      with the client role are automatically set using WS-Addressing.
    -->
    <partnerLink name="wsSFTPEstrellaRojaBiz" partnerLinkType="ns3:wsSFTPEstrellaRojaBiz"
                 partnerRole="SFTPEstrellaRojaBizPortType"/>
    <partnerLink name="bpelManagementsStatementsBankSantander"
                 partnerLinkType="client:bpelManagementsStatementsBankSantander"
                 myRole="bpelManagementsStatementsBankSantanderProvider"/>
    <partnerLink name="wsERPIntegrationBiz" partnerLinkType="ns1:wsERPIntegrationBiz"
                 partnerRole="ERPIntegrationBizPortType" myRole="ERPIntegrationBizCallbackPortType"/>
  </partnerLinks>
  <!-- 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      VARIABLES                                                        
      List of messages and XML documents used within this BPEL process 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <variables>
    <!-- Reference to the message passed as input during initiation -->
    <variable name="inputVariable" messageType="client:bpelManagementsStatementsBankSantanderRequestMessage"/>
    <variable name="varMessageRq" messageType="ns13:MessageRq"/>
    <variable name="varMessageRs" type="ns2:BaseRsType"/>
    <variable name="varFileName" type="xsd:string"/>
    <variable name="varInstanceTitle" type="xsd:string"/>
  </variables>
  <!-- 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
     ORCHESTRATION LOGIC                                               
     Set of activities coordinating the flow of messages across the    
     services integrated within this business process                  
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <sequence name="main">
    <!-- Receive input from requestor. (Note: This maps to operation defined in bpelManagementsStatementsBankSantander.wsdl) -->
    <receive name="receiveInput" partnerLink="bpelManagementsStatementsBankSantander" portType="client:bpelManagementsStatementsBankSantander"
             operation="ManagementsStatementsBankSantander" variable="inputVariable" createInstance="yes">
      <bpelx:fromProperties>
        <bpelx:fromProperty name="jca.ftp.FileName" variable="varFileName"/>
      </bpelx:fromProperties>
    </receive>
    <scope name="scopeMain">
      <documentation>
        <![CDATA[Scope principal que contiene las asignaciones, invocaciones a servicioes de negocio, así mismo transformaciones para el gestionamiento de lo esados de cuentas del banco de Santader.]]>
      </documentation>
      <bpelx:annotation>
        <bpelx:general>
          <bpelx:property name="userDescription">
            <![CDATA[Scope principal que contiene las asignaciones, invocaciones a servicioes de negocio, así mismo transformaciones para el gestionamiento de lo esados de cuentas del banco de Santader.]]>
          </bpelx:property>
        </bpelx:general>
      </bpelx:annotation>
      <variables>
        <variable name="varFlagError" type="xsd:boolean"/>
        <variable name="varStringError" type="xsd:string"/>
      </variables><sequence name="Sequence1"><assign name="assignInitializeVariables"
                                                 xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
          <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
                xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
            <from>false()</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varFlagError</to>
          </copy>
          <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
            <from>oraext:setFlowInstanceTitle("ImportSantanderBank")</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInstanceTitle</to>
          </copy>
        </assign><scope name="scopeStatementsLines"><variables><variable name="varSegmentLine"
                                                                    element="ns9:AccountStatementSantander"/><variable name="varInvokeWsERPIntegrationBizGenerateReportRq"
                                                                                                                       messageType="ns1:GenerateReportRq"/><variable name="varInvokeWsERPIntegrationBizGenerateReportRs"
                                                                                                                                                                     messageType="ns1:GenerateReportRs"/><variable name="varArrayCodes"
                                                                                                                                                                                                                   element="ns8:CodigoList"/><variable name="varDelimitedBankCodes"
                                                                                                                                                                                                                                                       type="xsd:string"/></variables><faultHandlers><catchAll><assign name="assignCatchAll"
                                                                                                                                                                                                                                                                                                                       xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
            xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
         <from>true()</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varFlagError</to>
      </copy>
      <copy bpelx:insertMissingToData="yes" ignoreMissingFromData="yes"
            xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
         <from>ora:getFaultAsString()</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varStringError</to>
      </copy>
   </assign></catchAll></faultHandlers><sequence><assign name="trSegmentLineToArrayStataments"><bpelx:annotation><bpelx:pattern patternName="bpelx:transformation"></bpelx:pattern></bpelx:annotation><copy><from>ora:doXSLTransformForDoc("../Transformations/trSegmentLine_To_ArrayStataments.xsl", $inputVariable.payload)</from><to variable="varSegmentLine"/></copy></assign><assign name="trGetBankCodeSubtrsToBpel"><bpelx:annotation><bpelx:pattern patternName="bpelx:transformation"></bpelx:pattern></bpelx:annotation><copy><from>ora:doXSLTransformForDoc("../Transformations/trGetBankCodeSubtrs_To_Bpel.xsl", $inputVariable.payload)</from><to variable="varArrayCodes"/></copy></assign><assign name="assignParameterValue"><copy ignoreMissingFromData="yes"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               bpelx:insertMissingToData="yes"><from>oraext:create-delimited-string($varArrayCodes/ns8:Codigo,',')</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varDelimitedBankCodes</to></copy><copy ignoreMissingFromData="yes"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         bpelx:insertMissingToData="yes"><from>$varDelimitedBankCodes</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsERPIntegrationBizGenerateReportRq.GenerateReportRq/ns1:parameterNameValues/ns1:item[1]/ns1:values/ns1:item[1]</to></copy><copy bpelx:insertMissingToData="yes"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ignoreMissingFromData="yes"><from>dvm:lookupValue ('DVMs/dvmGetTrxType.dvm', 'Code', 'PTRXCODE', 'Value', '' )</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsERPIntegrationBizGenerateReportRq.GenerateReportRq/ns1:parameterNameValues/ns1:item[1]/ns1:name</to></copy><copy ignoreMissingFromData="yes"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         bpelx:insertMissingToData="yes"><from>dvm:lookupValue ('DVMs/dvmGetTrxType.dvm', 'Code', 'TargetInterface', 'Value',' ')</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsERPIntegrationBizGenerateReportRq.GenerateReportRq/ns1:TargetInterface</to></copy><copy ignoreMissingFromData="yes"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    bpelx:insertMissingToData="yes"><from>dvm:lookupValue ('DVMs/dvmGetTrxType.dvm', 'Code', 'IntegrationName', 'Value','')</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsERPIntegrationBizGenerateReportRq.GenerateReportRq/ns1:IntegrationName</to></copy><copy ignoreMissingFromData="yes"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              bpelx:insertMissingToData="yes"><from>dvm:lookupValue ('DVMs/dvmGetTrxType.dvm', 'Code', 'ProcessName', 'Value' ,'')</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsERPIntegrationBizGenerateReportRq.GenerateReportRq/ns1:ProcessName</to></copy><copy ignoreMissingFromData="yes"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 bpelx:insertMissingToData="yes"><from>dvm:lookupValue ('DVMs/dvmGetTrxType.dvm', 'Code', 'ReportName', 'Value' ,'')</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsERPIntegrationBizGenerateReportRq.GenerateReportRq/ns1:ReportName</to></copy></assign><invoke name="invokeWsERPIntegrationBizGenerateReport"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             partnerLink="wsERPIntegrationBiz"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             portType="ns1:ERPIntegrationBizPortType"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             operation="GenerateReport"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             inputVariable="varInvokeWsERPIntegrationBizGenerateReportRq"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             outputVariable="varInvokeWsERPIntegrationBizGenerateReportRs"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             bpelx:invokeAsDetail="no"/><if name="ifValidateResponseGenerateReport"><documentation><![CDATA[Success]]></documentation><condition>$varInvokeWsERPIntegrationBizGenerateReportRs.GenerateReportRs/ns2:Success</condition><scope name="scopeGenerateFilesAndImport"><variables><variable name="varInvokeWsGetBankStatementsRq"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      messageType="ns3:GetBankStatementsRq"/><variable name="varInvokeWsGetBankStatementsRs"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       messageType="ns3:GetBankStatementsRs"/><variable name="varInvokeERPIntegrationBizImportToERPCloudRq"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        messageType="ns1:ImportToERPCloudRq"/><variable name="varInvokeERPIntegrationBizImportToERPCloudRs"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    messageType="ns1:ImportToERPCloudRs"/><variable name="varParametersReport"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    type="xsd:string"/><variable name="varXmlReport"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 element="ns4:DATA_DS"/><variable name="varWsGetBankDetailsRq"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  element="ns12:GetBankDetailsRq"/><variable name="varWsGetBankDetailsRs"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             element="ns12:GetBankDetailsRs"/></variables><sequence><assign name="assignVarReport"><copy><from>oraext:parseXML($varInvokeWsERPIntegrationBizGenerateReportRs.GenerateReportRs/ns1:Return/ns1:xmlOut)</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varXmlReport</to></copy></assign><assign name="varXmlReportToVarXmlReport"><bpelx:annotation><bpelx:pattern patternName="bpelx:transformation"></bpelx:pattern></bpelx:annotation><copy><from>ora:doXSLTransformForDoc("../Transformations/trVarXmlReport_To_VarXmlReport.xsl", $varXmlReport)</from><to variable="varXmlReport"/></copy></assign><if name="ifExistBankCodes"><documentation><![CDATA[Found Codes]]></documentation><condition>count($varXmlReport/ns4:XXER_CE_CODIGO_BANCARIO)&gt;0</condition><sequence><assign name="trbpelToSFTPEstrellaRojaBizGetBankStatementsRq"><bpelx:annotation><bpelx:pattern patternName="bpelx:xquery"></bpelx:pattern></bpelx:annotation><copy><from>ora:processXQuery10('../Transformations/trbpel_To_SFTPEstrellaRojaBizGetBankStatementsRq.xqy', 'varXmlReport', $varXmlReport, 'varSegmentLine', $varSegmentLine)</from><to variable="varInvokeWsGetBankStatementsRq"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  part="GetBankStatementsRq"/></copy></assign><assign name="assingAccountNumber"><copy ignoreMissingFromData="yes"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       bpelx:insertMissingToData="yes"><from>$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BankLinesDetails/ns3:AccountStatementsLists[1]/ns3:AccountNumber</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varWsGetBankDetailsRq/ns12:AccountNumber</to></copy></assign><extensionActivity><bpelx:call name="CallSubProcessGetBankDetails"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 xmlns:sp1="http://soa.estrellaroja.com.mx/SFTPEstrellaRojaEnt/sbpelGetBankDetails"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 target="sp1:sbpelGetBankDetails"><bpelx:param name="varGetBankDetailsRq"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               copyByValue="yes"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               variable="varWsGetBankDetailsRq"/><bpelx:param name="varGetBankDetailsRs"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              copyByValue="no"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              variable="varWsGetBankDetailsRs"/></bpelx:call></extensionActivity><if name="ifValidateGetBankDetails"><documentation><![CDATA[Success and Found Data]]></documentation><condition>$varWsGetBankDetailsRs/ns2:Success and (string-length($varWsGetBankDetailsRs/ns12:Return/ns12:BankDetails/ns12:BankName)&gt;0 and string-length($varWsGetBankDetailsRs/ns12:Return/ns12:BankDetails/ns12:BranchName)&gt;0)</condition><sequence>
                          <scope name="scopeWSImportToERPCloud">
                            <variables>
                              <variable name="varSendReportInterfaceRq" element="ns14:SendReportInterfaceRq"/>
                              <variable name="varTranslateFileNativeSANTANDER" type="xsd:string"/>
                            </variables>
                            <sequence>
                              <assign name="assingBankDetails">
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>$varWsGetBankDetailsRs/ns12:Return/ns12:BankDetails/ns12:BankName</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BankName</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>$varWsGetBankDetailsRs/ns12:Return/ns12:BankDetails/ns12:BranchName</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BankBranch</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from><literal>SANTANDER</literal></from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Sufix</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>ora:getComponentInstanceId()</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BanchId</to>
                                </copy>
                              </assign><assign name="assignBalancesStart"
                                               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
                                      xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                                  <from>$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BankLinesDetails/ns3:AccountStatementsLists[1]/ns3:AccountNumber</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[1]/ns3:AccountNumber</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
                                      xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                                  <from>"OPBD"</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[1]/ns3:StatementCode</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
                                      xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                                  <from>$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BankLinesDetails/ns3:AccountStatementsLists[1]/ns3:Balance</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[1]/ns3:Balance</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
                                      xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                                  <from>$varWsGetBankDetailsRs/ns12:Return/ns12:BankDetails/ns12:CurrencyCode</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[1]/ns3:CurrencyCode</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>"CRFT"</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[1]/ns3:Indicator</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BankLinesDetails/ns3:AccountStatementsLists[1]/ns3:StatementDate</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[1]/ns3:BalanceDate</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>"10"</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[1]/ns3:OrigBalanceCode</to>
                                </copy>
                              </assign><assign name="assignBalancesFinish"
                              xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
                                      xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                                  <from>$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BankLinesDetails/ns3:AccountStatementsLists[last()]/ns3:AccountNumber</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[2]/ns3:AccountNumber</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
                                      xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                                  <from>"CLBD"</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[2]/ns3:StatementCode</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
                                      xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                                  <from>$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BankLinesDetails/ns3:AccountStatementsLists[last()]/ns3:Balance</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[2]/ns3:Balance</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
                                      xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                                  <from>$varWsGetBankDetailsRs/ns12:Return/ns12:BankDetails/ns12:CurrencyCode</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[2]/ns3:CurrencyCode</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>"CRDT"</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[2]/ns3:Indicator</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BankLinesDetails/ns3:AccountStatementsLists[last()]/ns3:StatementDate</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[2]/ns3:BalanceDate</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>"10"</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:Balances/ns3:Balance[2]/ns3:OrigBalanceCode</to>
                                </copy>
                              </assign><invoke name="invokeWsSFTPEstrellaRojaBiz" inputVariable="varInvokeWsGetBankStatementsRq"
                                      outputVariable="varInvokeWsGetBankStatementsRs" bpelx:invokeAsDetail="no"
                                      partnerLink="wsSFTPEstrellaRojaBiz" portType="ns3:SFTPEstrellaRojaBizPortType"
                                      operation="GetBankStatements"/>
                              <assign name="assignSFTPEstrellaRojaBizRqZip">
                                <copy ignoreMissingFromData="yes">
                                  <from>$varInvokeWsGetBankStatementsRs.GetBankStatementsRs/ns3:Return/ns3:Files/ns3:FileCSV</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeERPIntegrationBizImportToERPCloudRq.ImportToERPCloudRq/ns1:File/ns1:Content</to>
                                </copy>
                                <copy>
                                  <from>"StatementBanksFs"</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeERPIntegrationBizImportToERPCloudRq.ImportToERPCloudRq/ns1:TargetInterface</to>
                                </copy>
                                <copy ignoreMissingFromData="yes">
                                  <from><literal>"zip"</literal></from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeERPIntegrationBizImportToERPCloudRq.ImportToERPCloudRq/ns1:File/ns1:ContentType</to>
                                </copy>
                                <copy>
                                  <from>concat("CeBankStatementsSantander1_",  xp20:current-dateTime() ,".zip")</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varInvokeERPIntegrationBizImportToERPCloudRq.ImportToERPCloudRq/ns1:File/ns1:FileName</to>
                                </copy>
                              </assign>
                              <assign name="translateNativeSANTANDER">
                                <bpelx:annotation>
                                  <bpelx:pattern>translate</bpelx:pattern>
                                </bpelx:annotation>
                                <copy>
                                  <from>ora:doTranslateToNative($inputVariable.payload, 'Schemas/Banks/ftpReadFileSantander.xsd', 'estadoCta', 'STRING')</from>
                                  <to>$varTranslateFileNativeSANTANDER</to>
                                </copy>
                              </assign>
                              <assign name="assignParameterToSendReportInterfaceRq">
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>"InterfaceBankStatements"</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varSendReportInterfaceRq/ns14:IntegrationName</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>"InterfaceBankStatements$SANTANDER"</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varSendReportInterfaceRq/ns14:ProcessName</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>ora:getComponentInstanceId()</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varSendReportInterfaceRq/ns14:BatchId</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>$varTranslateFileNativeSANTANDER</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varSendReportInterfaceRq/ns14:Files/ns14:ContentProcessedFile</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>$varFileName</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varSendReportInterfaceRq/ns14:Files/ns14:FileName</to>
                                </copy>
                                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                                  <from>count($varInvokeWsGetBankStatementsRq.GetBankStatementsRq/ns3:BankLinesDetails/ns3:AccountStatementsLists)</from>
                                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varSendReportInterfaceRq/ns14:Files/ns14:LinesNumber</to>
                                </copy>
                              </assign>
                              <extensionActivity>
                                <bpelx:call name="CallSubProcessImportErpCloud"
                                            xmlns:sp1="http://soa.estrellaroja.com.mx/SFTPEstrellaRojaEnt/sbpelImportErpCloud"
                                            target="sp1:sbpelImportErpCloud">
                                  <bpelx:param name="varInvokeWSImportToERPCloudRq" copyByValue="yes"
                                               variable="varInvokeERPIntegrationBizImportToERPCloudRq"/>
                                  <bpelx:param name="varSendReportInterfaceRq" copyByValue="yes"
                                               variable="varSendReportInterfaceRq"/>
                                  <bpelx:param name="varInvokeWSImportToERPCloudRs" copyByValue="no"
                                               variable="varInvokeERPIntegrationBizImportToERPCloudRs"/>
                                </bpelx:call>
                              </extensionActivity>
                            </sequence>
                          </scope></sequence><else><documentation><![CDATA[Failed]]></documentation><assign name="assignErrors"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
         xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
         <from>concat("The account number ",$varWsGetBankDetailsRq/ns12:AccountNumber ," no exist a ERP Cloud")</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varStringError</to>
      </copy><copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                              <from>true()</from>
                              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varFlagError</to>
                            </copy></assign></else></if></sequence><else><documentation><![CDATA[No Data Found Codes]]></documentation><assign name="assignErrors"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
         xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
         <from>concat("The codes Banamex ",$varDelimitedBankCodes," no exist a ERP Cloud")</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varStringError</to>
      </copy><copy bpelx:insertMissingToData="yes" ignoreMissingFromData="yes">
                          <from>true()</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varFlagError</to>
                        </copy></assign></else></if></sequence></scope><else><documentation><![CDATA[Failed]]></documentation>
                <assign name="assignErrors">
                  <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                    <from>$varInvokeWsERPIntegrationBizGenerateReportRs.GenerateReportRs/ns2:Errors/ns2:Error/ns2:Description</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varStringError</to>
                  </copy>
                  <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                    <from>true()</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varFlagError</to>
                  </copy>
                </assign>
              </else></if></sequence></scope>
        <if name="ifValidateErrorToSendEmail">
          <documentation>
            <![CDATA[Has Errors]]>
          </documentation>
          <condition>$varFlagError=true()</condition>
          <sequence name="Sequence2">
            <assign name="assignParametersSendEmail">
              <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                <from>$varStringError</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varMessageRq.MessageRq/ns13:Message/ns13:Message</to>
              </copy>
              <copy keepSrcElementName="no" bpelx:insertMissingToData="yes">
                <from>"InterfaceBankStatements"</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$varMessageRq.CustomHeader/ns13:IntegrationName</to>
              </copy>
            </assign>
            <extensionActivity>
              <bpelx:call name="CallSubProcessNotifications"
                          xmlns:sp1="http://xmlns.oracle.com/SFTPEstrellaRojaEnt/SFTPEstrellaRojaEnt/sbpelNotifications"
                          target="sp1:sbpelNotifications">
                <bpelx:param name="varMessageRq" copyByValue="yes" variable="varMessageRq"/>
                <bpelx:param name="varMessageRs" copyByValue="yes" variable="varMessageRs"/>
              </bpelx:call>
            </extensionActivity>
          </sequence>
          <else>
            <documentation>
              <![CDATA[Not Found Errors]]>
            </documentation><empty name="Continue" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></else>
        </if>
      </sequence></scope>
  </sequence>
</process>